# 실수를 표현하는 방법
## 고정소수점 표현법
&nbsp; 2진수를 사용한 소수 표현에서 2진 소수점의 위치를 임의로 정하는 방법  
4비트 중 2비트는 2진 소수점 오른쪽에서 분수를, 2비트는 왼쪽에 있는 숫자를 표현하는데 사용한다면 소수점의 위치가 항상 일정해진다.

```angular2html
10.00 | 2
10.01 | 2 + 1/4
10.10 | 2 + 1/2
```

&nbsp; 소수점 왼쪽의 정수는 2진 표현법과 유사하다.  
2진 소수점의 오른쪽에 있는 숫자들은 분수를 표현하고 1/2, 1/4와 같은 2의 거듭제곱을 분모로 사용한다.

> 고정 소수점은 쓸모 있는 범위의 실숫값을 표현하기 위해 필요한 비트의 개수가 너무 많아 메모리 비용이 많이 들어 범용 컴퓨터에서는 잘 사용하지 않는다.  
> 디지털 신호 처리 장치 *DSP, digital signal processor* 등 특별한 목적 외에는 사용하지 않는다.

## 부동소수점 표현법
&nbsp; 플랑크 상수 *Plank's constant* (양자 역학 기본 상수 중 하나)와 아보가드로 수 *Avogadro's constant* 처럼 범위가 다양한 수를 2진수로 표현하는 문제를 해결하기 위해
과학적 표기법 *scientific notation*을 2진수에 적용하여 수를 해석하는 새로운 방법을 도입한다. 

#### 과학적 표기법
10진 소수점 왼쪽이 한자리 뿐인 소수에 10을 몇번 거듭제곱한 값을 곱하는 방식으로 소수를 표현

> 0.00012 > 1.2 x 10<sup>-3</sup>  
> 여기서 1.2를 **가수** *mantissa* 10에 -3만큼 거듭제곱한 -3을 **지수** *exponent* 라고 한다. 

2진법으로 표기할 때는 10이 아닌 2를 밑으로 둔다.
즉, 부동소수점 표현법은 지수와 가수를 분리함으로써 수를 표현할 때 필요한 0을 모두 저장하지 않고 큰 수나 작은 수를 표현할 수 있다.

```angular2html
0.0 | 00 | 0(0 x 2^0)
0.0 | 01 | 0(0 x 2^1)
0.0 | 10 | 0(0 x 2^2)
0.0 | 11 | 0(0 x 2^3)

0.1 | 00 | 0.5(1/2 x 2^0)
0.1 | 01 | 1.0(1/2 x 2^1)
0.1 | 10 | 2.0(1/2 x 2^2)
0.1 | 11 | 4.0(1/2 x 2^3)

1.0 | 00 | 1.0(1 x 2^0)
```
#### 부동소수전 표현법의 단점
1. 비트 조합 중에 낭비되는 부분이 많다.  
0을 표현하는 방법이 4가지가 되고, 1.0, 2.0, 4.0을 표현하는 방법도 두가지씩 있다.
2. 비트 패턴이 가능한 모든 수를 표현하지 못한다.  
지수가 커질 수 록 가수의 한 패턴과 다른 패턴 사이의 값 차이가 커진다.
0.5와 0.5를 더하면 1.0을 얻을 수 있지만 6.5를 표현하는 비트 패턴이 없어 0.5와 6.0을 더할 수 없는 부작용이 있다.
: 부정확한 계산에 대해 추적하고 개선하는 수치 해석 *numerical analysis*라는 수학 분야가 있다.

### IEEE 부동소수점 수 표준
&nbsp; 이상하지만 부동소수점 수 시스템은 컴퓨터에서 계산을 수행할 때 실수를 표현하는 표준 방법이다.
낭비되는 비트 조합을 최소화하고 반올림을 쉽게 하기위한 여러 트릭을 사용하는데 이에 대한 기능을 정의하는 것이 **IEEE 754** 표준이다.

미국 전자전기공학회 *IEEE, Institute of Electrical and Electronic Engineers*의 약자로 표준 제정 등의 다양한 활동을 하는 조직이다.

#### 트릭의 종류
1. 정규화 *normalization*  
가수를 조정해서 맨 앞에 0이 없게 만드는 것이다. 가수와 지수를 조정하게 된다.
2. 가수의 맨 왼쪽 비트가 1이라는 사실을 알고 생략하는 것  
디지털 이큅먼트 사 *DEC, Digital Equipment Corporation* 에서 고안한 것으로, 이로 인해 가수에 1비트를 더 사용할 수 있다.
// 질문 가수의 맨 왼쪽 비트가 1인걸 어케암..?

#### 부동소수점의 종류
1. 기본 정밀도 *single precision* 부동소수점 수 = 단정도실수  
32비트를 사용하여 7비트 정밀도로 대락 &plusmn;10<sup>&plusmn;38</sup> 정도의 범위의 표현이 가능하다.
2. 2배 정밀도 *double precision* 부동소수점 수 = 배정도 실수   
64비트를 사용하여 15비트 정밀도로 대락 &plusmn;10<sup>&plusmn;308</sup> 정도의 범위의 표현이 가능하다.

2배 정밀도 수가 기본 정밀도 수보다 지수가 3비트 크고, 지수의 범위는 8배, 가수가 29비트 더 크다.  
따라서 2배 정밀도 수의 정밀도가 훨씬 더 크고 그 대신 비트를 2배나 더 사용하기 때문에 비용이 더 지불된다.

지수에 대한 부호 비트가 따로 존재하지 않는데, IEEE 754 설계자들은 편향된 *biased* 지숫값을 사용해서
지수 비트가 모두 0이거나 1인 경우 특별한 의미를 갖게하고 실제 지숫값은 나머지 비트 패턴에 사용하도록 했다.

기본 정밀도의 경우 편향값은 127이고, 127(01111111)이 지수 0을 표현한다.  
2진수 1을 표현하는 비트패턴(00000001)은 지수에서 -126을 표현하고 2진수 254(11111110)은 +127을 표현한다.
2배 정밀도 수의 편향값은 1023으로 사용하며 비슷한 방식을 취한다.

#### IEEE 754의 장점
1. 0으로 나눴을 때 생기는 양의 무한대나 음의 무한대를 표현하는 비트 패턴과 같은 다양한 비트 패턴을 제공한다.
NaN *Not a Number* 과 같은 잘못된 산술 연산을 수행했다는 표현법도 있다. 